<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5 Areas of Attention — OT Resource Hub</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div id="shared-header"></div>
  <script src="/currency.js"></script>

  <script>
    window.SnipcartSettings = {
        publicApiKey: 'MWU3MjEzYmQtYjk5My00MzQxLWEwNjgtYzJkMjJlZTRiOGE3NjM5MDE5NTc1MjM3NDgyMDE2',
        loadStrategy: 'on-user-interaction',
        modalStyle: 'side',
    };

    (()=>{var c,d;(d=(c=window.SnipcartSettings).version)!=null||(c.version="3.0");var s,S;(S=(s=window.SnipcartSettings).timeoutDuration)!=null||(s.timeoutDuration=2750);var l,p;(p=(l=window.SnipcartSettings).domain)!=null||(l.domain="cdn.snipcart.com");var w,u;(u=(w=window.SnipcartSettings).protocol)!=null||(w.protocol="https");var f=window.SnipcartSettings.version.includes("v3.0.0-ci")||window.SnipcartSettings.version!="3.0"&&window.SnipcartSettings.version.localeCompare("3.4.0",void 0,{numeric:!0,sensitivity:"base"})===-1,m=["focus","mouseover","touchmove","scroll","keydown"];window.LoadSnipcart=o;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r();function r(){window.SnipcartSettings.loadStrategy?window.SnipcartSettings.loadStrategy==="on-user-interaction"&&(m.forEach(t=>document.addEventListener(t,o)),setTimeout(o,window.SnipcartSettings.timeoutDuration)):o()}var a=!1;function o(){if(a)return;a=!0;let t=document.getElementsByTagName("head")[0],e=document.querySelector("#snipcart"),i=document.querySelector(`src[src^="${window.SnipcartSettings.protocol}://${window.SnipcartSettings.domain}"][src$="snipcart.js"]`),n=document.querySelector(`link[href^="${window.SnipcartSettings.protocol}://${window.SnipcartSettings.domain}"][href$="snipcart.css"]`);e||(e=document.createElement("div"),e.id="snipcart",e.setAttribute("hidden","true"),document.body.appendChild(e)),v(e),i||(i=document.createElement("script"),i.src=`${window.SnipcartSettings.protocol}://${window.SnipcartSettings.domain}/themes/v${window.SnipcartSettings.version}/default/snipcart.js`,i.async=!0,t.appendChild(i)),n||(n=document.createElement("link"),n.rel="stylesheet",n.type="text/css",n.href=`${window.SnipcartSettings.protocol}://${window.SnipcartSettings.domain}/themes/v${window.SnipcartSettings.version}/default/snipcart.css`,t.prepend(n)),m.forEach(g=>document.removeEventListener(g,o))}function v(t){!f||(t.dataset.apiKey=window.SnipcartSettings.publicApiKey,window.SnipcartSettings.addProductBehavior&&(t.dataset.configAddProductBehavior=window.SnipcartSettings.addProductBehavior),window.SnipcartSettings.modalStyle&&(t.dataset.configModalStyle=window.SnipcartSettings.modalStyle),window.SnipcartSettings.currency&&(t.dataset.currency=window.SnipcartSettings.currency),window.SnipcartSettings.templatesUrl&&(t.dataset.templatesUrl=window.SnipcartSettings.templatesUrl))}})();

    // Load shared header
    fetch('/header.html')
      .then(r => r.text())
      .then(html => document.getElementById('shared-header').innerHTML = html);
  </script>

  <main class="product-detail container">
    <section class="carousel" aria-label="Product image carousel" tabindex="0">
      <div class="carousel-track" id="carousel-track">
        <div class="carousel-slide" data-index="0">
          <img src="../assets/product-thumbnails/5 areas of attention thumbnail.jpg" alt="5 Areas of Attention preview 1">
        </div>
      </div>

      <button class="carousel-btn prev" aria-label="Previous image">‹</button>
      <button class="carousel-btn next" aria-label="Next image">›</button>

      <div class="carousel-dots" role="tablist" aria-label="Select image" id="carousel-dots"></div>
    </section>

    <aside class="product-side">
      <h1>5 Areas of Attention</h1>
      <p class="price">2.50 <span class="currency-symbol"></span></p>
      <p>A concise guide to the five core areas that influence attention in children and strategies to support learning and engagement.</p>

      <div style="margin-top:1rem"><strong>Includes:</strong> downloadable PDF, printable activities</div>

      <div class="qty-controls">
        <button id="qty-decrease" type="button" aria-label="Decrease">−</button>
        <input id="qty-input" type="number" value="1" min="1" step="1">
        <button id="qty-increase" type="button" aria-label="Increase">+</button>
      </div>

      <div class="actions">
        <button id="add-to-cart" class="snipcart-add-item add-to-cart" 
            data-item-id="5-Areas-of-Attention"
            data-item-file-guid="42e2f5e9-f0c6-4dcf-a3b7-0f30a809fa8e"
            data-item-name="5 Areas of Attention"
            data-item-price="2.50"
            data-item-url="https://otresourceshub.com/product-specific-pages/5-areas-of-attention.html"
            data-item-description="Five areas that affect attention with strategies and activities."
            data-item-image="https://www.developmentaltherapy.com/wp-content/uploads/2022/05/Sensory-Integration-Guide.jpg"
            data-item-quantity="1"
        >Add to cart</button>

        <button id="continue-shopping" class="btn-continue">Continue shopping</button>
      </div>

      <p style="margin-top:1rem;color:#6D4C41;font-size:0.95rem">
        Projected cost: <strong id="projected">2.50 <span class="currency-symbol"></span></strong>
      </p>
    </aside>
  </main>

  <footer>
    <div class="footer-content">
      <p>© 2025 Occupational Therapy Resource Hub. All rights reserved.</p>
      <ul class="footer-links">
        <li><a href="privacy-policy.html">Privacy Policy</a></li>
        <li><a href="terms_of_service.html">Terms of Service</a></li>
        <li><a href="contact.html">Contact Us</a></li>
      </ul>
    </div>
  </footer>

<script>
  // Lightweight accessible carousel (keep your existing code unchanged)
  (function(){
    // ... your full carousel code here ...
  })();

  // === QUANTITY, PROJECTED COST, AND SNIPCART INTEGRATION ===
  const qtyInput = document.getElementById('qty-input');
  const projected = document.getElementById('projected');
  const addBtn = document.getElementById('add-to-cart');

  function getPrice() { 
    return 2.50; 
  }
  window.getPrice = getPrice;

  function updateProjected() {
    if (!qtyInput || !projected) return;
    const qty = parseInt(qtyInput.value || 1);
    const total = (getPrice() * qty).toFixed(2);
    projected.innerHTML = total + ' <span class="currency-symbol"></span>';
  }

  function updateSnipcartQuantity() {
    if (!addBtn) return;
    const qty = parseInt(qtyInput.value || 1);
    addBtn.setAttribute('data-item-quantity', qty);
  }

  // Initial update
  updateProjected();
  updateSnipcartQuantity();

  // Quantity controls — update both projected and Snipcart quantity
  document.getElementById('qty-increase').addEventListener('click', () => {
    qtyInput.value = parseInt(qtyInput.value || 1) + 1;
    updateProjected();
    updateSnipcartQuantity();
  });

  document.getElementById('qty-decrease').addEventListener('click', () => {
    qtyInput.value = Math.max(1, parseInt(qtyInput.value || 1) - 1);
    updateProjected();
    updateSnipcartQuantity();
  });

  qtyInput.addEventListener('input', () => {
    if (qtyInput.value < 1) qtyInput.value = 1;
    updateProjected();
    updateSnipcartQuantity();
  });

  // Continue Shopping — stores last product and redirects
  document.getElementById('continue-shopping').addEventListener('click', () => {
    const qty = parseInt(qtyInput.value || 1);
    localStorage.setItem('lastProduct', JSON.stringify({
      id: addBtn.dataset.itemId,
      name: addBtn.dataset.itemName,
      price: addBtn.dataset.itemPrice,
      quantity: qty
    }));
    window.location.href = '/products.html';
  });
</script>
</body>
</html>